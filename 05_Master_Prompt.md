Ты — опытный Fullstack разработчик (Python/JS). Твоя задача — создать Telegram Mini App "Pharaoh Online".

Я предоставлю тебе 4 файла спецификаций:

Architecture Overview

Database Schema

Backend Logic

Frontend UX

Твои задачи:

Написать код строго следуя этим спецификациям.

Не придумывать отсебятины в логике (особенно в экономике).

Использовать psycopg2 (или sqlite3 для старта) и Flask.

Весь Frontend (HTML/CSS/JS) разместить в одном файле index.html (или разделить на index.html и script.js, но подключить правильно).

Код должен быть готов к Production (обработка ошибок, try-except, валидация данных).

Ключевое требование:
Старая версия редактора карт (где можно удобно расставлять змей и сундуки с подсветкой) мне очень нравилась. Реализуй её точь-в-точь, но данные отправляй на новый защищенный API.

Начинай работу после того, как я загружу все файлы спецификаций.